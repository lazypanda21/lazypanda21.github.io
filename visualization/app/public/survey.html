<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	<title>FriendFinder</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/css/materialize.min.css">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/css/materialize.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/js/materialize.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/js/materialize.min.js"></script>

</head>

<style>
.jumbotron{
  background: pink;
}
img{
  height: 30%;
  width:30%;
}
</style>
<header>
  <div class="jumbotron">
    <h1 class="display-4 center">Friend Finder</h1>
  </div>
</header>
<body>

		<div class="container">
			<h2 class="center survey">Survey Questions</h2>
			<hr>
			<h4>About You</h4>
		  <div class="row">
    		<form class="col s12" id="myForm">
    			<div class="row">
        		<div class="input-field col s12">
          		<input id="name" type="text" class="validate formInput" required>
          		<label >Name</label>
        		</div>
      		</div>
      		<div class="row last">
        		<div class="input-field col s12">
          		<input id="pic" type="text" class="validate formInput" required>
          		<label >Photo</label>
        		</div>
      		</div>
      		<div class="row">
      			<h4>Question 1</h4>
      			<h5>How much do you like marvel movies.</h5>
      		  <div class="input-field col s12">
					    <select class="chosen" id="q1">
					      <option value="" disabled selected>Choose your option</option>
					      <option value="1">1 (Strongly Disagree)</option>
					      <option value="2">2</option>
					      <option value="3">3</option>
					      <option value="4">4</option>
					      <option value="5">5 (Strongly Agree)</option>
					    </select>
					  </div>
      		</div>
      		<div class="row">
      			<h4>Question 2</h4>
      			<h5>Rate your weebness</h5>
      		  <div class="input-field col s12">
					    <select class="chosen" id="q2">
					      <option value="" disabled selected>Choose your option</option>
					      <option value="1">1 (Strongly Disagree)</option>
					      <option value="2">2</option>
					      <option value="3">3</option>
					      <option value="4">4</option>
					      <option value="5">5 (Strongly Agree)</option>
					    </select>
					  </div>
				  </div>
				  <div class="row">
      			<h4>Question 3</h4>
      			<h5>You secretly think you are a superhero.</h5>
      		  <div class="input-field col s12">
					    <select class="chosen" id="q3">
					      <option value="" disabled selected>Choose your option</option>
					      <option value="1">1 (Strongly Disagree)</option>
					      <option value="2">2</option>
					      <option value="3">3</option>
					      <option value="4">4</option>
					      <option value="5">5 (Strongly Agree)</option>
					    </select>
					  </div>
				  </div>
				  <div class="row">
      			<h4>Question 4</h4>
      			<h5>You like eating.</h5>
      		  <div class="input-field col s12">
					    <select class="chosen" id="q4">
					      <option value="" disabled selected>Choose your option</option>
					      <option value="1">1 (Strongly Disagree)</option>
					      <option value="2">2</option>
					      <option value="3">3</option>
					      <option value="4">4</option>
					      <option value="5">5 (Strongly Agree)</option>
					    </select>
					  </div>
				  </div>
				  <div class="row">
      			<h4>Question 5</h4>
      			<h5>Instead of thinking youself as introvert, you are more outgoing</h5>
      		  <div class="input-field col s12">
					    <select class="chosen" id="q5">
					      <option value="" disabled selected>Choose your option</option>
					      <option value="1">1 (Strongly Disagree)</option>
					      <option value="2">2</option>
					      <option value="3">3</option>
					      <option value="4">4</option>
					      <option value="5">5 (Strongly Agree)</option>
					    </select>
					  </div>
				  </div>
				  <div class="row">
      			<h4>Question 6</h4>
      			<h5>You don't like lettuce.</h5>
      		  <div class="input-field col s12">
					    <select class="chosen" id="q6">
					      <option value="" disabled selected>Choose your option</option>
					      <option value="1">1 (Strongly Disagree)</option>
					      <option value="2">2</option>
					      <option value="3">3</option>
					      <option value="4">4</option>
					      <option value="5">5 (Strongly Agree)</option>
					    </select>
					  </div>
				  </div>
				  <div class="row">
      			<h4>Question 7</h4>
      			<h5>You are a cheap date.</h5>
      		  <div class="input-field col s12">
					    <select class="chosen" id="q7">
					      <option value="" disabled selected>Choose your option</option>
					      <option value="1">1 (Strongly Disagree)</option>
					      <option value="2">2</option>
					      <option value="3">3</option>
					      <option value="4">4</option>
					      <option value="5">5 (Strongly Agree)</option>
					    </select>
					  </div>
				  </div>
				  <div class="row">
      			<h4>Question 8</h4>
      			<h5>you prefer red onions to white onions.</h5>
      		  <div class="input-field col s12">
					    <select class="chosen" id="q8">
					      <option value="" disabled selected>Choose your option</option>
					      <option value="1">1 (Strongly Disagree)</option>
					      <option value="2">2</option>
					      <option value="3">3</option>
					      <option value="4">4</option>
					      <option value="5">5 (Strongly Agree)</option>
					    </select>
					  </div>
				  </div>
				  <div class="row">
      			<h4>Question 9</h4>
      			<h5>you have road rage.</h5>
      		  <div class="input-field col s12">
					    <select class="chosen" id="q9">
					      <option value="" disabled selected>Choose your option</option>
					      <option value="1">1 (Strongly Disagree)</option>
					      <option value="2">2</option>
					      <option value="3">3</option>
					      <option value="4">4</option>
					      <option value="5">5 (Strongly Agree)</option>
					    </select>
					  </div>
				  </div>
				  <div class="row">
      			<h4>Question 10</h4>
      			<h5>you think questions above are weird and unrelatable</h5>
      		  <div class="input-field col s12">
					    <select class="chosen" id="q10">
					      <option value="" disabled selected>Choose your option</option>
					      <option value="1">1 (Strongly Disagree)</option>
					      <option value="2">2</option>
					      <option value="3">3</option>
					      <option value="4">4</option>
					      <option value="5">5 (Strongly Agree)</option>
					    </select>
					  </div>
				  </div>
			    <button class="btn-large waves-effect waves-light" type="submit" name="action" id="submit">Submit
    				<i class="material-icons right">send</i>
  				</button>
    		</form>
  		</div>
		</div>

<!--modal---->
<div id="modal1" class="modal">
  	<div class="modal-header">
  	</div>
    <div class="modal-content center-align">
    	<h3>Your Best Friend Is</h3>
    	<hr>
      <h4 id="matchName"></h4>
      <img id="matchImg" height="300px" width="300px"></img>
    </div>
  </div>


<script>
$(document).ready(function() {
    $('select').material_select();
	});

  $("#submit").on("click", function(event){
    // check if all the fields are filled
    event.preventDefault();

  	function validateForm() {
		  var isValid = true;

		  $('.formInput').each(function() {
		  	//console.log($(this).val());
		    if ( $(this).val() === '' )
	        isValid = false;
			  	//console.log(isValid);
		  });
		  $('.chosen').each(function() {
		  	//console.log($(this).val());
		  	if ( $(this).val() == null )
	  			isValid = false;
			  	//console.log(isValid);
		  });
		  return isValid;
		}


		if (validateForm()) {
    	var userData = {
    		name: $("#name").val(),
    		photo: $("#pic").val(),
    		scores: [$("#q1").val().trim(),
        $("#q2").val().trim(),
        $("#q3").val().trim(),
        $("#q4").val().trim(),
        $("#q5").val().trim(),
        $("#q6").val().trim(),
        $("#q7").val().trim(),
        $("#q8").val().trim(),
        $("#q9").val().trim(),
        $("#q10").val().trim(), ]
    	};


      $.post("/api/friends", userData, function(data){
        console.log(data.name);
    		$("#matchName").text(data.name);
    		$('#matchImg').attr("src", data.photo);
        console.log(data.photo);
	      $("#modal1").openModal();
    	});

  		$("#name").val("");
  		$("#pic").val("");
      var form = document.getElementById("myForm");
      form.reset();
  		$("#name").focus();
		}

    else {
			alert("Please fill out the empty field!");
		}

  });
</script>
</body>
</html>
