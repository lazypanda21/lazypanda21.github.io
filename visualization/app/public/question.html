<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	<title>FriendFinder</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/css/materialize.min.css">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/css/materialize.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/js/materialize.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/js/materialize.min.js"></script>

</head>

<style>
.jumbotron{
  background: pink;
}
img{
  height: 30%;
  width:30%;
}
</style>
<header>
  <div class="jumbotron">
    <h1 class="display-4 center">What's your energy consumption?</h1>
  </div>
</header>
<body>

		<div class="container">
			<h2 class="center survey">Survey Questions</h2>
			<hr>

		  <div class="row">
    		<form class="col s12" id="myForm">

          <div class="row">
            <div class="col s12">
              <h5>How many refrigerators are plugged-in and turned on in your home?(0 for none)</h5>
              <div class="input-field inline">
                <input id="fridgenum" type="text" class="validate">
           </div>
         </div>
       </div>

       <div class="row">
         <div class="col s12">
           <h5>How many stoves are used in your home?(0 for none)</h5>
           <div class="input-field inline">
             <input id="stovenum" type="text" class="validate">
        </div>
      </div>
    </div>

				  <div class="row">
      			<h5>What fuel does your stove use?</h5>
      		  <div class="input-field col s12">
					    <select class="chosen" id="q3">
					      <option value="" disabled selected>Choose your option</option>
					      <option value="Electricity">Electricity (Strongly Disagree)</option>
					      <option value="Natural Gas">Natural Gas</option>
					      <option value="Propane">Propane</option>
					    </select>
					  </div>
				  </div>

          <div class="row">
            <div class="col s12">
              <h5>How often do you cook at home on a weekly base?(0 for none)</h5>
              <div class="input-field inline">
                <input id="cooknum" type="text" class="validate">
           </div>
         </div>
       </div>

       <div class="row">
         <div class="col s12">
           <h5>How long does it typically take you to cook?</h5>
           <div class="input-field inline">
             <input id="cooktime" type="text" class="validate">
             <label for="cooktime">Min</label>

        </div>
      </div>
    </div>

       <div class="row">
         <div class="col s12">
          <h5>how many ovens do you have in your house?(0 for none)</h5>
           <div class="input-field inline">
             <input id="ovennum" type="text" class="validate">
        </div>
      </div>
    </div>


			    <button class="btn-large waves-effect waves-light" type="submit" name="action" id="submit">Submit
    				<i class="material-icons right">send</i>
  				</button>
    		</form>
  		</div>
		</div>

<!--modal---->
<div id="modal1" class="modal">
  	<div class="modal-header">
  	</div>
    <div class="modal-content center-align">
    	<h3>Your energy consuption bar is </h3>
    	<hr>
      <h4 id="matchName"></h4>
      <img id="matchImg" height="300px" width="300px"></img>
    </div>
  </div>


<script>
$(document).ready(function() {
    $('select').material_select();
	});

  $("#submit").on("click", function(event){
    // check if all the fields are filled
    event.preventDefault();

  	function validateForm() {
		  var isValid = true;

		  $('.formInput').each(function() {
		  	//console.log($(this).val());
		    if ( $(this).val() === '' )
	        isValid = false;
			  	//console.log(isValid);
		  });
		  $('.chosen').each(function() {
		  	//console.log($(this).val());
		  	if ( $(this).val() == null )
	  			isValid = false;
			  	//console.log(isValid);
		  });
		  return isValid;
		}


		if (validateForm()) {
    	var userData = {
    		name: $("#name").val(),
    		photo: $("#pic").val(),
    		scores: [$("#q1").val().trim(),
        $("#q2").val().trim(),
        $("#q3").val().trim(),
        $("#q4").val().trim(),
        $("#q5").val().trim(),
        $("#q6").val().trim(),
        $("#q7").val().trim(),
        $("#q8").val().trim(),
        $("#q9").val().trim(),
        $("#q10").val().trim(), ]
    	};


      $.post("/api/friends", userData, function(data){
        console.log(data.name);
    		$("#matchName").text(data.name);
    		$('#matchImg').attr("src", data.photo);
        console.log(data.photo);
	      $("#modal1").openModal();
    	});

  		$("#name").val("");
  		$("#pic").val("");
      var form = document.getElementById("myForm");
      form.reset();
  		$("#name").focus();
		}

    else {
			alert("Please fill out the empty field!");
		}

  });
</script>
</body>
</html>
